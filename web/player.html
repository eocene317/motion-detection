<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<!-- Website Design By: www.happyworm.com -->
<title>Bagel's Cam</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/skin/blue.monday/css/jplayer.blue.monday.min.css" rel="stylesheet" type="text/css" />
<style>
	.jp-video-480p{width:800px}
</style>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/jplayer/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/add-on/jplayer.playlist.min.js"></script>
<script type="text/javascript">
//<![CDATA[

var myPlaylist;

function loadPlaylist() {
	$.ajax('./media/').done(function(data) {
		var playlist = $(data).find('a:contains(".mp4")').map(function() {
			 var file = $(this).text();
			 var link = './media/' + file;
			 return { title: file, m4v: link }
		});

		myPlaylist.setPlaylist(playlist);

		var currentVideo = JSON.parse(localStorage.getItem('currentVideo'));
		if (currentVideo) {
			var candidate = myPlaylist.playlist[currentVideo.index];
			if (candidate && candidate.title == currentVideo.title) {
				myPlaylist.select(currentVideo.index);
			} else {
				localStorage.removeItem('currentVideo');
			}
		}

		$('li.jp-playlist-current').each(function() { this.scrollIntoView() });
		$('#jp_container_N').bind($.jPlayer.event.play, function(e) {
			var currentVideo = myPlaylist.playlist[myPlaylist.current];
			currentVideo.index = myPlaylist.current;
			localStorage.setItem('currentVideo', JSON.stringify(currentVideo));
			$('li.jp-playlist-current').each(function() { this.scrollIntoView() });
		});

	});
}


$(document).ready(function() {
	myPlaylist = new jPlayerPlaylist({ jPlayer: "#jquery_jplayer_N", cssSelectorAncestor: "#jp_container_N" }, [], {
		playlistOptions: {},
		supplied: "m4v",
		useStateClassSkin: true,
		autoBlur: false,
		smoothPlayBar: false,
		keyEnabled: true,
		size: {	width: 800, height: 448, cssClass: "jp-video-480p" }
	});

	$('#jp_container_N').bind($.jPlayer.event.ready, function(e) {
		loadPlaylist();
	});

});

//]]>
</script>
</head>
<body>
<div id="jp_container_N" class="jp-video" role="application" aria-label="media player">
	<div class="jp-type-playlist">
		<div id="jquery_jplayer_N" class="jp-jplayer"></div>
		<div class="jp-gui">
			<div class="jp-interface">
				<div class="jp-progress">
					<div class="jp-seek-bar">
						<div class="jp-play-bar"></div>
					</div>
				</div>
				<div class="jp-current-time" role="timer" aria-label="time">&nbsp;</div>
				<div class="jp-duration" role="timer" aria-label="duration">&nbsp;</div>
				<div class="jp-details">
					<div class="jp-title" aria-label="title">&nbsp;</div>
				</div>
				<div class="jp-controls-holder">
					<div class="jp-volume-controls">
						<button class="jp-mute" role="button" tabindex="0">mute</button>
						<button class="jp-volume-max" role="button" tabindex="0">max volume</button>
						<div class="jp-volume-bar">
							<div class="jp-volume-bar-value"></div>
						</div>
					</div>
					<div class="jp-controls">
						<button class="jp-previous" role="button" tabindex="0">previous</button>
						<button class="jp-play" role="button" tabindex="0">play</button>
						<button class="jp-stop" role="button" tabindex="0">stop</button>
						<button class="jp-next" role="button" tabindex="0">next</button>
					</div>
					<div class="jp-toggles">
						<button class="jp-repeat" role="button" tabindex="0">repeat</button>
						<button class="jp-shuffle" role="button" tabindex="0">shuffle</button>
						<button class="jp-full-screen" role="button" tabindex="0">full screen</button>
					</div>
				</div>
			</div>
		</div>
		<div class="jp-playlist" style="max-height: 100px; overflow-y: auto">
			<ul>
				<li></li>
			</ul>
		</div>
	</div>
</div>

</body>

</html>
